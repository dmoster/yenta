<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
  <title>Yenta | Profile</title>
</head>

<body>

  <% include ../partials/nav-logged-in.ejs %>

  <div class="container">
    <h1>Profile</h1>
    <p class="lead">Welcome back, <%= username %></p>
    <div class="row">
      <div id="bio-div" class="col-md-8" onmouseover="showEditBtn()" onmouseout="hideEditBtn()" onclick="editBio()">
        <h2>Bio<button type="button" id="editBtn" class="btn btn-link text-muted" data-toggle="modal" data-target="#bio-edit-modal"><i class="fas fa-edit"></i> Edit</button></h2>
        <div id="currentBio">
          
        </div>
      </div>

      <div class="col-md-4">
        <h2>Games</h2>
        [Coming Soon]
      </div>
    </div>

  </div>
  <% include ../partials/logout-modal.ejs %>

  <div class="modal fade" id="bio-edit-modal" tabindex="-1" role="dialog" aria-labelledby="login" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="bio-edit-title">Edit Bio</h2>
        </div>
        <div class="modal-body">
          <form method="POST" action="/profile">
            <div class="form-group">
              <textarea class="form-control" id="bio-editor" rows="3" value="<%= bio %>"></textarea>
            </div>
            <div class="form-group">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary" name="saveBio" value="saveBio">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <% include ../partials/footer.ejs %>
  <script>
    let bioParagraphs = (`<%= bio %>`).split('\n')
    bioParagraphs.forEach(element => {
      element = '<p>' + element + '</p>'
      document.getElementById('currentBio').innerHTML += element
    });
  </script>
</body>
</html>
